<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù„ØªØ­ØµÙŠÙ„ÙŠ â€“ ÙÙŠØ²ÙŠØ§Ø¡</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    * {
      box-sizing: border-box;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Arabic", "Segoe UI", sans-serif;
    }

    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: radial-gradient(circle at top left, #1f2937 0, #020617 55%, #000 100%);
      color: #e5e7eb;
    }

    .shell {
      width: 100%;
      max-width: 900px;
      margin: 16px;
      background: radial-gradient(circle at top, #0f172a, #020617);
      border-radius: 24px;
      padding: 24px 22px 18px;
      border: 1px solid rgba(148, 163, 184, 0.18);
      box-shadow: 0 25px 60px rgba(15, 23, 42, 0.8);
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .title {
      font-size: 1.4rem;
      font-weight: 700;
      color: #f9fafb;
    }

    .subtitle {
      font-size: 0.9rem;
      color: #9ca3af;
      margin-top: 4px;
    }

    .chip {
      padding: 6px 12px;
      border-radius: 999px;
      font-size: 0.8rem;
      background: rgba(79, 70, 229, 0.18);
      border: 1px solid rgba(129, 140, 248, 0.7);
      color: #c7d2fe;
    }

    .section {
      margin-top: 4px;
      padding: 16px 14px 18px;
      border-radius: 18px;
      background: radial-gradient(circle at top left, #020617 0, #020617 40%, #020617 100%);
      border: 1px solid rgba(31, 41, 55, 0.9);
    }

    .section-title {
      font-size: 1rem;
      font-weight: 600;
      margin-bottom: 8px;
      color: #e5e7eb;
    }

    .instructions {
      font-size: 0.9rem;
      color: #d1d5db;
      line-height: 1.6;
    }

    .instructions ul {
      padding-right: 18px;
      margin: 6px 0 0;
    }

    .instructions li {
      margin-bottom: 4px;
    }

    .meta-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(130px, 1fr));
      gap: 10px;
      margin-top: 10px;
    }

    .meta-card {
      padding: 10px 10px;
      border-radius: 14px;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(51, 65, 85, 0.9);
      font-size: 0.85rem;
    }

    .meta-label {
      color: #9ca3af;
      margin-bottom: 2px;
    }

    .meta-value {
      font-weight: 600;
      color: #e5e7eb;
    }

    .btn-row {
      display: flex;
      justify-content: space-between;
      gap: 8px;
      margin-top: 16px;
    }

    .btn {
      border-radius: 999px;
      padding: 9px 14px;
      font-size: 0.9rem;
      border: 1px solid rgba(148, 163, 184, 0.4);
      background: transparent;
      color: #e5e7eb;
      cursor: pointer;
      transition: 0.15s ease;
    }

    .btn:hover {
      background: rgba(15, 23, 42, 0.9);
      border-color: #38bdf8;
    }

    .btn-primary {
      background: linear-gradient(to right, #14b8a6, #06b6d4);
      border: none;
      font-weight: 600;
      color: #0b1120;
      box-shadow: 0 12px 30px rgba(8, 47, 73, 0.7);
    }

    .btn-primary:hover {
      filter: brightness(1.05);
      transform: translateY(-1px);
      color: #e5e7eb;
    }

    .btn-center {
      display: inline-flex;
      margin: 0 auto;
    }

    .btn[disabled] {
      opacity: 0.6;
      cursor: default;
      box-shadow: none;
      transform: none;
    }

    .quiz-header-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
      font-size: 0.9rem;
      color: #9ca3af;
    }

    .timer-pill {
      padding: 6px 12px;
      border-radius: 999px;
      background: rgba(15, 118, 110, 0.15);
      color: #6ee7b7;
      border: 1px solid rgba(45, 212, 191, 0.6);
      font-size: 0.85rem;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .timer-pill.urgent {
      background: rgba(127, 29, 29, 0.4);
      color: #fecaca;
      border-color: rgba(239, 68, 68, 0.9);
    }

    .question-card {
      margin-top: 6px;
      padding: 14px 12px 16px;
      border-radius: 16px;
      background: rgba(15, 23, 42, 0.95);
      border: 1px solid rgba(55, 65, 81, 0.9);
    }

    .question-number {
      font-size: 0.85rem;
      color: #9ca3af;
      margin-bottom: 6px;
    }

    .question-text {
      font-size: 1rem;
      font-weight: 600;
      margin-bottom: 10px;
      color: #e5e7eb;
    }

    .subject-tag {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      font-size: 0.78rem;
      padding: 3px 8px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.7);
      border: 1px solid rgba(129, 140, 248, 0.7);
      color: #c7d2fe;
      margin-bottom: 4px;
    }

    .options {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-top: 6px;
    }

    .option-btn {
      width: 100%;
      text-align: right;
      border-radius: 12px;
      border: 1px solid rgba(55, 65, 81, 0.9);
      padding: 9px 12px;
      background: rgba(15, 23, 42, 0.9);
      color: #e5e7eb;
      font-size: 0.95rem;
      cursor: pointer;
      display: flex;
      justify-content: flex-start;
      align-items: center;
      transition: 0.12s ease;
    }

    .option-btn span:first-child {
      opacity: 0.75;
      font-size: 0.85rem;
      margin-left: 8px;
      color: #9ca3af;
    }

    .option-btn:hover {
      border-color: rgba(56, 189, 248, 0.7);
      background: rgba(15, 23, 42, 1);
    }

    .option-btn.selected {
      border-color: rgba(45, 212, 191, 0.9);
      background: linear-gradient(to left, rgba(15, 23, 42, 0.9), rgba(8, 47, 73, 0.9));
      box-shadow: 0 10px 25px rgba(8, 47, 73, 0.8);
    }

    .option-btn.disabled {
      opacity: 0.55;
      cursor: default;
      filter: grayscale(0.1);
    }

    .quiz-footer {
      margin-top: 12px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      font-size: 0.85rem;
      color: #9ca3af;
    }

    .nav-buttons {
      display: flex;
      gap: 8px;
    }

    .result-box {
      text-align: center;
      padding: 16px 10px 10px;
    }

    .result-main {
      font-size: 2rem;
      font-weight: 700;
      margin-bottom: 4px;
      color: #f9fafb;
    }

    .result-note {
      font-size: 0.95rem;
      margin-bottom: 8px;
      color: #e5e7eb;
    }

    .result-meta {
      font-size: 0.85rem;
      color: #9ca3af;
    }

    .footer {
      margin-top: 4px;
      padding-top: 8px;
      border-top: 1px solid rgba(51, 65, 85, 0.9);
      font-size: 0.8rem;
      text-align: center;
      color: #9ca3af;
    }

    .footer span {
      font-weight: 600;
      color: #a5b4fc;
    }

    .form-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin-top: 8px;
    }

    .footer-names {
      margin-top: 4px;
      margin-bottom: 4px;
      font-size: 0.8rem;
      opacity: 0.9;
    }

    .form-field {
      display: flex;
      flex-direction: column;
      gap: 4px;
      font-size: 0.85rem;
    }

    .form-field label {
      color: #e5e7eb;
    }

    .form-field input,
    .form-field select {
      border-radius: 999px;
      border: 1px solid rgba(55, 65, 81, 0.9);
      padding: 8px 12px;
      font-size: 0.9rem;
      outline: none;
      background: rgba(15, 23, 42, 0.9);
      color: #e5e7eb;
    }

    .form-field input::placeholder {
      color: #6b7280;
    }

    .form-field input:focus,
    .form-field select:focus {
      border-color: rgba(129, 140, 248, 0.9);
      box-shadow: 0 0 0 1px rgba(129, 140, 248, 0.4);
    }

    @media (max-width: 640px) {
      .shell {
        padding: 18px 14px 14px;
      }
      .form-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
<div class="shell">
  <div class="header">
    <div>
      <div class="title">Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªØ­ØµÙŠÙ„ÙŠ â€“ ÙÙŠØ²ÙŠØ§Ø¡</div>
      <div class="subtitle">ØªØ¯Ø±ÙŠØ¨ Ø®ÙÙŠÙ Ù„Ù€ Ø§Ù„ØªØ­ØµÙŠÙ„ÙŠ Ø¹Ù„Ù‰ Ø£Ø³Ø¦Ù„Ø© Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡ ğŸŒ¸</div>
    </div>
    <div class="chip">ÙˆØ¶Ø¹ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù…ØªØªØ§Ø¨Ø¹Ø©</div>
  </div>

  <div id="app"></div>

  <footer class="footer">
    <div>Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù„ØªØ­ØµÙŠÙ„ÙŠ Ù…Ù† Ø¥Ø¹Ø¯Ø§Ø¯:</div>
    <div class="footer-names">
      Ø£Ù…ÙŠØ±Ø©ØŒ Ø´ÙŠÙ…Ø§Ø¡ØŒ Ø­Ø³Ù†Ø§Ø¡ØŒ Ø³Ù…ÙŠØ©ØŒ Ù…Ø±ÙŠÙ…ØŒ Ø¨Ù„Ø³Ù…ØŒ Ø¨Ø³Ù…Ù‡ØŒ Ù‡ÙŠÙØ§Ø¡ØŒ Ø¬Ù†Ù‰
    </div>
    <div>Â© 2025 â€“ Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ØªØ¯Ø±ÙŠØ¨ÙŠ ÙÙ‚Ø·</div>
  </footer>
</div>

<script>
  const QUESTION_TIME_SECONDS = 60; // Ø«Ø§Ù†ÙŠØ© Ù„ÙƒÙ„ Ø³Ø¤Ø§Ù„
  const STORAGE_KEY = "tahseeliPhysicsAttempt_v1";
  const SHEET_ENDPOINT = "https://script.google.com/macros/s/AKfycbyKbRXVXFo6peL0l15N-gTL01WxBAKgFe369LDZwbF7ka_00M4upu4BhD6eUFVXXfZkZg/exec";

  const studentInfo = {
    name: "",
    school: "",
    grade: ""
  };

  // Ù‚Ø±Ø§Ø¡Ø© Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø­ÙÙˆØ¸Ø© (Ù„Ùˆ ÙÙŠÙ‡)
  let savedAttempt = null;
  try {
    const stored = localStorage.getItem(STORAGE_KEY);
    if (stored) savedAttempt = JSON.parse(stored);
  } catch (e) {
    savedAttempt = null;
  }

  // 10 Ø£Ø³Ø¦Ù„Ø© ÙÙŠØ²ÙŠØ§Ø¡ Ø¹Ù† Ø§Ù„Ø¶ÙˆØ¡ ÙˆØ§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¡ Ø§Ù„Ø³Ø§ÙƒÙ†Ø©
  const questions = [
    {
      subject: "ÙÙŠØ²ÙŠØ§Ø¡ â€“ ØªØ¯Ø§Ø®Ù„ Ø¶ÙˆØ¦ÙŠ",
      text: "Ø§Ù„Ø¶ÙˆØ¡ Ø§Ù„Ù†Ø§ØªØ¬ Ø¹Ù† ØªØ±Ø§ÙƒØ¨ Ø¶ÙˆØ¦ÙŠ Ù…ØµØ¯Ø±ÙŠÙ† Ø£Ùˆ Ø£ÙƒØ«Ø± Ù…Ø´ÙƒÙ‘ÙÙ„Ù‹Ø§ Ù…Ù‚Ø¯Ù…Ø§Øª Ù…ÙˆØ¬Ø§Øª Ù…Ù†ØªØ¸Ù…Ø© ÙŠÙØ³Ù…Ù‘Ù‰:",
      choices: [
        "Ø§Ù„Ø¶ÙˆØ¡ ØºÙŠØ± Ø§Ù„Ù…ØªØ±Ø§Ø¨Ø·",
        "Ø§Ù„Ø¶ÙˆØ¡ Ø§Ù„Ù…Ø³ØªÙ‚Ø·Ø¨",
        "Ø§Ù„Ø¶ÙˆØ¡ Ø§Ù„Ù…ØªØ±Ø§Ø¨Ø·",
        "Ø§Ù„Ø¶ÙˆØ¡ ØºÙŠØ± Ø§Ù„Ù…Ø³ØªÙ‚Ø·Ø¨"
      ],
      correctIndex: 2
    },
    {
      subject: "ÙÙŠØ²ÙŠØ§Ø¡ â€“ ØªØ¯Ø§Ø®Ù„ (Ø´Ù‚ÙŠÙ†)",
      text: "Ù†Ù…Ø· Ù…Ù† Ø­Ø²Ù… Ù…Ø¶ÙŠØ¦Ø© ÙˆÙ…Ø¹ØªÙ…Ø© ÙŠØªÙƒÙˆÙ‘Ù† Ø¹Ù„Ù‰ Ø´Ø§Ø´Ø© Ù†ØªÙŠØ¬Ø© Ù…Ø±ÙˆØ± Ø§Ù„Ø¶ÙˆØ¡ Ø®Ù„Ø§Ù„ Ø´Ù‚ÙŠÙ† ÙŠÙØ³Ù…Ù‘Ù‰:",
      choices: [
        "Ø£Ù‡Ø¯Ø§Ø¨ Ù…Ø±ÙƒØ²ÙŠØ©",
        "Ø£Ù‡Ø¯Ø§Ø¨ Ø§Ù„Ø­ÙŠÙˆØ¯",
        "Ø£Ù‡Ø¯Ø§Ø¨ Ø§Ù„ØªØ¯Ø§Ø®Ù„",
        "Ø£Ù‡Ø¯Ø§Ø¨ Ù„Ø§ Ù…Ø±ÙƒØ²ÙŠØ©"
      ],
      correctIndex: 2
    },
    {
      subject: "ÙÙŠØ²ÙŠØ§Ø¡ â€“ Ø­ÙŠÙˆØ¯",
      text: "Ø£ÙŠÙ‘Ù Ù…Ù…Ù‘Ø§ ÙŠÙ„ÙŠ ÙŠÙØ¹Ø¯ Ù…Ø«Ø§Ù„Ù‹Ø§ Ø¹Ù„Ù‰ Ø§Ù„Ø­ÙŠÙˆØ¯ØŸ",
      choices: [
        "Ø§Ù†ÙƒØ³Ø§Ø± Ø§Ù„Ø¶ÙˆØ¡ Ø¹Ù†Ø¯ Ø¹Ø¨ÙˆØ±Ù‡ Ø¨ÙŠÙ† ÙˆØ³Ø·ÙŠÙ†",
        "Ø§Ù„ØªÙØ§Ù Ø§Ù„Ø¶ÙˆØ¡ Ø­ÙˆÙ„ Ø­Ø§ÙØ© Ø­Ø§Ø¬Ø²",
        "Ø§Ù†Ø¹ÙƒØ§Ø³ Ø§Ù„Ø¶ÙˆØ¡ Ø¹Ù† Ø§Ù„Ù…Ø±Ø¢Ø©",
        "ØªØ¯Ø§Ø®Ù„ Ù…ÙˆØ¬ØªÙŠÙ† Ø¶ÙˆØ¦ÙŠØªÙŠÙ†"
      ],
      correctIndex: 1
    },
    {
      subject: "ÙÙŠØ²ÙŠØ§Ø¡ â€“ Ø­ÙŠÙˆØ¯ Ø§Ù„Ø´Ù‚",
      text: "Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø´Ù‚ Ø¶ÙŠÙ‘Ù‚Ù‹Ø§ Ø¬Ø¯Ù‘Ù‹Ø§ØŒ ÙØ¥Ù† ÙƒÙ…ÙŠØ© Ø§Ù„Ø­ÙŠÙˆØ¯:",
      choices: [
        "ØªÙ‚Ù„",
        "ØªØ²ÙŠØ¯",
        "ØªØ®ØªÙÙŠ",
        "ØªØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ù„ÙˆÙ† Ø§Ù„Ø¶ÙˆØ¡ ÙÙ‚Ø·"
      ],
      correctIndex: 1
    },
    {
      subject: "ÙÙŠØ²ÙŠØ§Ø¡ â€“ ØªØ¯Ø§Ø®Ù„ ÙÙŠ Ø§Ù„Ø£ØºØ´ÙŠØ© Ø§Ù„Ø±Ù‚ÙŠÙ‚Ø©",
      text: "Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø·ÙŠÙ Ø§Ù„ØªÙŠ Ù†Ø±Ø§Ù‡Ø§ Ø¹Ù„Ù‰ ÙÙ‚Ø§Ø¹Ø© Ø§Ù„ØµØ§Ø¨ÙˆÙ† Ù†Ø§ØªØ¬Ø© Ø¹Ù†:",
      choices: [
        "ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¶ÙˆØ¡ Ø§Ù„Ø£Ø¨ÙŠØ¶ Ø¨ÙˆØ§Ø³Ø·Ø© Ø§Ù„Ù…Ù†Ø´ÙˆØ±",
        "Ø§Ù…ØªØµØ§Øµ Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø¨ÙˆØ§Ø³Ø·Ø© Ø§Ù„Ø£ØµØ¨Ø§Øº",
        "Ø§Ù„ØªØ¯Ø§Ø®Ù„ ÙÙŠ Ø§Ù„Ø£ØºØ´ÙŠØ© Ø§Ù„Ø±Ù‚ÙŠÙ‚Ø©",
        "Ø¬Ù…ÙŠØ¹ Ù…Ø§ Ø³Ø¨Ù‚"
      ],
      correctIndex: 2
    },
    {
      subject: "ÙÙŠØ²ÙŠØ§Ø¡ â€“ ÙƒÙ‡Ø±Ø¨Ø§Ø¡ Ø³Ø§ÙƒÙ†Ø©",
      text: "Ø§Ù„ÙØ±Ù‚Ø¹Ø© Ø§Ù„ØªÙŠ Ù‚Ø¯ Ù†Ø³Ù…Ø¹Ù‡Ø§ Ø¹Ù†Ø¯Ù…Ø§ Ù†Ù…Ø´ÙŠ ÙÙˆÙ‚ Ø³Ø¬Ø§Ø¯Ø© Ø³Ø¨Ø¨Ù‡Ø§ Ø´Ø­Ù† Ø§Ù„Ø¬Ø³Ù… Ø¹Ù† Ø·Ø±ÙŠÙ‚:",
      choices: [
        "Ø§Ù„ØªÙˆØµÙŠÙ„",
        "Ø§Ù„Ø­Ø«",
        "Ø§Ù„ØªØ£Ø±ÙŠØ¶",
        "Ø§Ù„Ø¯Ù‘ÙÙ„Ù’Ùƒ"
      ],
      correctIndex: 3
    },
    {
      subject: "ÙÙŠØ²ÙŠØ§Ø¡ â€“ ÙƒØ´Ø§Ù ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠ",
      text: "Ø¥Ø°Ø§ Ù‚ÙØ±Ù‘ÙØ¨ Ù‚Ø¶ÙŠØ¨ Ù…Ù† ÙƒØ´Ø§Ù ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠ Ù…Ø´Ø­ÙˆÙ† ÙØ§Ø²Ø¯Ø§Ø¯ Ø§Ù†ÙØ±Ø§Ø¬ ÙˆØ±Ù‚ØªÙŠ Ø§Ù„ÙƒØ´Ø§ÙØŒ ÙÙ‡Ø°Ø§ ÙŠØ¯Ù„ Ø¹Ù„Ù‰ Ø£Ù† Ø§Ù„ÙƒØ´Ø§Ù Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠ ÙˆØ§Ù„Ù‚Ø¶ÙŠØ¨:",
      choices: [
        "Ù…Ø´Ø­ÙˆÙ†Ø§Ù† Ø¨Ø§Ù„Ø´Ø­Ù†Ø© Ù†ÙØ³Ù‡Ø§",
        "Ù…Ø´Ø­ÙˆÙ†Ø§Ù† Ø¨Ø´Ø­Ù†ØªÙŠÙ† Ù…Ø®ØªÙ„ÙØªÙŠÙ†",
        "ØºÙŠØ± Ù…Ø´Ø­ÙˆÙ†ÙŠÙ†",
        "Ø£Ø­Ø¯Ù‡Ù…Ø§ ÙÙ‚Ø· Ù…Ø´Ø­ÙˆÙ†"
      ],
      correctIndex: 0
    },
    {
      subject: "ÙÙŠØ²ÙŠØ§Ø¡ â€“ ÙƒÙ…ÙŠØ© Ø§Ù„Ø´Ø­Ù†Ø©",
      text: "Ø¥Ø°Ø§ ÙƒØ§Ù† Ø«Ø§Ø¨Øª Ø§Ù„Ø´Ø­Ù†Ø© e = 1.6Ã—10^-19 CØŒ ÙØ¥Ù† Ù…Ù‚Ø¯Ø§Ø± Ø´Ø­Ù†Ø© 6.24Ã—10^18 Ù…Ù† Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†Ø§Øª ÙŠØ³Ø§ÙˆÙŠ:",
      choices: [
        "1 ÙƒÙˆÙ„ÙˆÙ…",
        "0.5 ÙƒÙˆÙ„ÙˆÙ…",
        "0.1 ÙƒÙˆÙ„ÙˆÙ…",
        "10 ÙƒÙˆÙ„ÙˆÙ…"
      ],
      correctIndex: 0
    },
    {
      subject: "ÙÙŠØ²ÙŠØ§Ø¡ â€“ Ù…Ø¬Ø§Ù„ Ø¨ÙŠÙ† Ù„ÙˆØ­ÙŠÙ†",
      text: "Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ù…Ø³Ø§ÙØ© Ø¨ÙŠÙ† Ù„ÙˆØ­ÙŠÙ† Ù…ØªÙˆØ§Ø²ÙŠÙŠÙ† Ù…Ø´Ø­ÙˆÙ†ÙŠÙ† 1.5 cmØŒ ÙˆÙ…Ù‚Ø¯Ø§Ø± Ø§Ù„Ù…Ø¬Ø§Ù„ Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠ Ø¨ÙŠÙ†Ù‡Ù…Ø§ 1800 N/CØŒ ÙÙ…Ø§ ÙØ±Ù‚ Ø§Ù„Ø¬Ù‡Ø¯ Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠ Ø¨ÙŠÙ† Ø§Ù„Ù„ÙˆØ­ÙŠÙ† Ø¨ÙˆØ­Ø¯Ø© Ø§Ù„ÙÙˆÙ„ØªØŸ",
      choices: [
        "27 V",
        "35 V",
        "270 V",
        "350 V"
      ],
      correctIndex: 0
    },
    {
      subject: "ÙÙŠØ²ÙŠØ§Ø¡ â€“ ØªÙƒÙ…ÙŠØ© Ø§Ù„Ø´Ø­Ù†Ø©",
      text: "Ø·Ù„Ø¨ Ù…Ø¹Ù„Ù… Ù…Ù† Ø·Ù„Ø§Ø¨Ù‡ Ø¥ÙŠØ¬Ø§Ø¯ Ù…Ù‚Ø¯Ø§Ø± Ø§Ù„Ø´Ø­Ù†Ø© Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ© Ù„Ø¬Ø³Ù… Ù…Ø§ Ø¨Ø§Ù„ÙƒÙˆÙ„ÙˆÙ…ØŒ ÙˆØ¹Ù†Ø¯Ù…Ø§ Ù†Ø¸Ø± Ø¥Ù„Ù‰ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø¹Ø±Ù Ø£Ù† Ø¥Ø¬Ø§Ø¨Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø· ÙŠÙ…ÙƒÙ† Ø£Ù† ØªÙƒÙˆÙ† ØµØ­ÙŠØ­Ø© Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø´Ø­Ù†Ø© ÙƒÙ…ÙŠØ© Ù…ÙƒÙ…Ù‘Ø§Ø© (e = 1.6Ã—10^-19 C). Ø£ÙŠÙ‘ÙŒ Ù…Ù† Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„Ø¢ØªÙŠØ© Ù…Ù…ÙƒÙ†Ø©ØŸ",
      choices: [
        "5Ã—10^-19 C",
        "10Ã—10^-19 C",
        "4.4Ã—10^-19 C",
        "3.2Ã—10^-19 C"
      ],
      correctIndex: 3
    }
  ];

  let currentIndex = 0;
  let answers = new Array(questions.length).fill(null);
  let timeLeft = new Array(questions.length).fill(QUESTION_TIME_SECONDS);
  let timerId = null;
  let quizStarted = false;
  let quizFinished = false;

  const app = document.getElementById("app");

  // Ø´Ø§Ø´Ø© Ù„Ùˆ Ø³Ø¨Ù‚ ÙˆØ­ÙÙ„Ù‘ Ø§Ù„Ù…Ø­Ø§Ùƒ Ù…Ù† Ù‡Ø°Ø§ Ø§Ù„Ù…ØªØµÙØ­
  function renderLockedScreen() {
    app.innerHTML = "";

    const section = document.createElement("div");
    section.className = "section";

    const box = document.createElement("div");
    box.className = "result-box";

    const title = document.createElement("div");
    title.className = "section-title";
    title.textContent = "Ø³Ø¨Ù‚ ÙˆØ­Ù„Ù‘ÙŠØªÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù…Ø­Ø§Ùƒ Ù…Ù† Ù‡Ø°Ø§ Ø§Ù„Ù…ØªØµÙØ­ ğŸŒ¸";

    const main = document.createElement("div");
    main.className = "result-main";
    if (savedAttempt) {
      main.textContent = `${savedAttempt.score} / ${savedAttempt.total} (${savedAttempt.percent}Ùª)`;
    } else {
      main.textContent = "Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªÙŠØ¬Ø© Ù…Ø­ÙÙˆØ¸Ø©.";
    }

    const info = document.createElement("div");
    info.className = "result-meta";
    if (savedAttempt) {
      info.textContent =
        `Ø§Ù„Ø§Ø³Ù…: ${savedAttempt.name || "â€”"}  |  Ø§Ù„Ù…Ø¯Ø±Ø³Ø©: ${savedAttempt.school || "â€”"}  |  Ø§Ù„ØµÙ/Ø§Ù„Ù…Ø³Ø§Ø±: ${savedAttempt.grade || "â€”"}  |  Ø§Ù„ØªØ§Ø±ÙŠØ®: ${savedAttempt.date || "â€”"}`;
    } else {
      info.textContent = "Ø§Ù„Ù†ØªÙŠØ¬Ø© ØºÙŠØ± Ù…ØªÙˆÙØ±Ø©ØŒ Ø¬Ø±Ù‘Ø¨ÙŠ Ù…Ù† Ù…ØªØµÙØ­ Ø£Ùˆ Ø¬Ù‡Ø§Ø² Ø¢Ø®Ø± Ø¥Ø°Ø§ Ù…Ø§ Ø­Ù„Ù‘ÙŠØªÙŠ Ù…Ù† Ù‚Ø¨Ù„.";
    }

    const note = document.createElement("div");
    note.className = "result-note";
    note.textContent = "Ø§Ù„Ù…Ø­Ø§ÙƒØ§Ø© Ù…Ø³Ù…ÙˆØ­Ø© Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø· Ù…Ù† Ù‡Ø°Ø§ Ø§Ù„Ù…ØªØµÙØ­. Ù„Ùˆ ØªØ­ØªØ§Ø¬ÙŠÙ† ØªØ¯Ø±ÙŠØ¨ Ø²ÙŠØ§Ø¯Ø©ØŒ Ø§Ø³ØªØ®Ø¯Ù…ÙŠ Ø¬Ù‡Ø§Ø² Ø£Ùˆ Ù…ØªØµÙØ­ Ù…Ø®ØªÙ„Ù.";

    box.appendChild(title);
    box.appendChild(main);
    box.appendChild(note);
    box.appendChild(info);

    section.appendChild(box);
    app.appendChild(section);
  }

  // Ø´Ø§Ø´Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨Ø©
  function renderStudentForm() {
    app.innerHTML = "";

    const section = document.createElement("div");
    section.className = "section";

    const title = document.createElement("div");
    title.className = "section-title";
    title.textContent = "Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨Ø©";

    const instructions = document.createElement("div");
    instructions.className = "instructions";
    instructions.innerHTML = `
      Ø¹Ø¨ÙŠ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØªØ­ØªØŒ Ø¹Ø´Ø§Ù† ØªØ·Ù„Ø¹ Ù„Ùƒ ÙÙŠ Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù…Ø­Ø§ÙƒØ§Ø© ÙˆØªÙ‚Ø¯Ø±ÙŠÙ† ØªØ±Ø¬Ø¹ÙŠÙ† Ù„Ù‡Ø§ Ø¨Ø¹Ø¯ÙŠÙ† Ù„Ùˆ Ø­Ø¨ÙŠØªÙŠ ØªØ­ÙØ¸ÙŠÙ†Ù‡Ø§ Ø£Ùˆ ØªØµÙˆØ±ÙŠÙ†Ù‡Ø§ ğŸŒ¸
    `;

    const formGrid = document.createElement("div");
    formGrid.className = "form-grid";

    const nameField = document.createElement("div");
    nameField.className = "form-field";
    const nameLabel = document.createElement("label");
    nameLabel.textContent = "Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨Ø© *";
    const nameInput = document.createElement("input");
    nameInput.type = "text";
    nameInput.placeholder = "Ù…Ø«Ø§Ù„: Ù†ÙˆØ±Ø© Ø¨Ù†Øª Ù…Ø­Ù…Ø¯";
    nameInput.value = studentInfo.name;
    nameField.appendChild(nameLabel);
    nameField.appendChild(nameInput);

    const schoolField = document.createElement("div");
    schoolField.className = "form-field";
    const schoolLabel = document.createElement("label");
    schoolLabel.textContent = "Ø§Ø³Ù… Ø§Ù„Ù…Ø¯Ø±Ø³Ø©";
    const schoolInput = document.createElement("input");
    schoolInput.type = "text";
    schoolInput.placeholder = "Ù…Ø«Ø§Ù„: Ø§Ù„Ø«Ø§Ù†ÙˆÙŠØ© Ø§Ù„Ø«Ø§Ù†ÙŠØ© Ù„Ù„Ø¨Ù†Ø§Øª";
    schoolInput.value = studentInfo.school;
    schoolField.appendChild(schoolLabel);
    schoolField.appendChild(schoolInput);

    const gradeField = document.createElement("div");
    gradeField.className = "form-field";
    const gradeLabel = document.createElement("label");
    gradeLabel.textContent = "Ø§Ù„ØµÙ / Ø§Ù„Ù…Ø³Ø§Ø±";
    const gradeSelect = document.createElement("select");
    const gradeOptions = [
      "",
      "Ø«Ø§Ù„Ø« Ø«Ø§Ù†ÙˆÙŠ â€“ Ù…Ø³Ø§Ø± Ø¹Ø§Ù…",
      "Ø£Ø®Ø±Ù‰"
    ];
    gradeOptions.forEach((opt) => {
      const o = document.createElement("option");
      o.value = opt;
      o.textContent = opt === "" ? "Ø§Ø®ØªØ§Ø±ÙŠ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)" : opt;
      if (opt === studentInfo.grade) o.selected = true;
      gradeSelect.appendChild(o);
    });
    gradeField.appendChild(gradeLabel);
    gradeField.appendChild(gradeSelect);

    formGrid.appendChild(nameField);
    formGrid.appendChild(schoolField);
    formGrid.appendChild(gradeField);

    const btnRow = document.createElement("div");
    btnRow.className = "btn-row";

    const nextBtn = document.createElement("button");
    nextBtn.className = "btn btn-primary btn-center";
    nextBtn.textContent = "Ø§Ù„ØªØ§Ù„ÙŠ â†’ ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ù„Ù…Ø­Ø§ÙƒØ§Ø©";
    nextBtn.onclick = () => {
      const nameVal = nameInput.value.trim();
      if (!nameVal) {
        alert("Ø­Ø·Ù‘ÙŠ Ø§Ø³Ù…Ùƒ Ø£ÙˆÙ„ØŒ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø£ÙˆÙ„ ğŸŒ¸");
        return;
      }
      studentInfo.name = nameVal;
      studentInfo.school = schoolInput.value.trim();
      studentInfo.grade = gradeSelect.value;
      renderInstructions();
    };

    btnRow.appendChild(nextBtn);

    section.appendChild(title);
    section.appendChild(instructions);
    section.appendChild(formGrid);
    section.appendChild(btnRow);

    app.appendChild(section);
  }

  // Ø´Ø§Ø´Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª
  function renderInstructions() {
    app.innerHTML = "";
    const section = document.createElement("div");
    section.className = "section";

    const title = document.createElement("div");
    title.className = "section-title";
    title.textContent = `Ù‚Ø¨Ù„ Ù†Ø¨Ø¯Ø£ ÙŠØ§ ${studentInfo.name || "Ø·Ø§Ù„Ø¨Ø©"} ğŸ‘‡`;

    const instructions = document.createElement("div");
    instructions.className = "instructions";
    instructions.innerHTML = `
      Ù‡Ø°ÙŠ Ù…Ø­Ø§ÙƒØ§Ø© Ø¨Ø³ÙŠØ·Ø© Ù„Ù„ØªØ­ØµÙŠÙ„ÙŠØŒ Ø¹Ø´Ø§Ù† ØªØªØ¹ÙˆØ¯ÙŠÙ† Ø¹Ù„Ù‰ Ø¬Ùˆ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© ÙˆØ§Ù„ÙˆÙ‚ØªØŒ Ù…Ùˆ Ø§Ø®ØªØ¨Ø§Ø± Ø±Ø³Ù…ÙŠ ÙˆÙ„Ø§ Ù…Ø±ØªØ¨Ø· Ø¨Ø£ÙŠ Ø¬Ù‡Ø©.
      <ul>
        <li>Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ù‡Ù†Ø§: <strong>${questions.length} Ø³Ø¤Ø§Ù„ ÙÙŠ ÙÙŠØ²ÙŠØ§Ø¡</strong>.</li>
        <li>Ù„ÙƒÙ„ Ø³Ø¤Ø§Ù„ <strong>Ø¯Ù‚ÙŠÙ‚Ø© ÙˆØ­Ø¯Ø©</strong>ØŒ ÙˆØ§Ù„Ø¹Ø¯Ù‘Ø§Ø¯ ÙÙˆÙ‚ ÙŠØ¨ÙŠÙ‘Ù† Ù„Ùƒ ÙƒÙ… Ø¨Ø§Ù‚ÙŠ.</li>
        <li>ÙƒÙ„ Ø³Ø¤Ø§Ù„ Ù„Ù‡ <strong>Ø¥Ø¬Ø§Ø¨Ø© ÙˆØ­Ø¯Ø© ØµØ­</strong>ØŒ Ø§Ø®ØªØ§Ø±ÙŠ Ø§Ù„Ù„ÙŠ ØªØ­Ø³Ù‘ÙŠÙ†Ù‡ Ø£Ù‚Ø±Ø¨ Ù„Ù„Ø­Ù„.</li>
        <li>ÙÙŠ ÙˆØ±Ù‚Ø© Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©ØŒ Ø¸Ù„Ù‘Ù„ÙŠ Ø®ÙŠØ§Ø±Ùƒ Ø¹Ù†Ø¯ Ø±Ù‚Ù… Ø§Ù„Ø³Ø¤Ø§Ù„.</li>
        <li>ØªÙ‚Ø¯Ø±ÙŠÙ† ØªØªÙ†Ù‚Ù„ÙŠÙ† Ø¨ÙŠÙ† Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø¨Ø²Ø±Ù‘ÙŠ <strong>Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ù„ÙŠ Ù‚Ø¨Ù„</strong> Ùˆ<strong>Ø§Ù„Ù„ÙŠ Ø¨Ø¹Ø¯Ù‡</strong> Ø·ÙˆÙ„ Ù…Ø§ ÙˆÙ‚Øª Ø§Ù„Ø³Ø¤Ø§Ù„ Ù…Ø§ Ø®Ù„Øµ.</li>
      </ul>
    `;

    const metaGrid = document.createElement("div");
    metaGrid.className = "meta-grid";
    metaGrid.innerHTML = `
      <div class="meta-card">
        <div class="meta-label">Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨Ø©</div>
        <div class="meta-value">${studentInfo.name || "â€”"}</div>
      </div>
      <div class="meta-card">
        <div class="meta-label">Ø§Ù„Ù…Ø¯Ø±Ø³Ø©</div>
        <div class="meta-value">${studentInfo.school || "â€”"}</div>
      </div>
      <div class="meta-card">
        <div class="meta-label">ÙƒÙ… Ø³Ø¤Ø§Ù„ØŸ</div>
        <div class="meta-value">${questions.length} Ø³Ø¤Ø§Ù„</div>
      </div>
      <div class="meta-card">
        <div class="meta-label">Ø§Ù„ÙˆÙ‚Øª Ø§Ù„ØªÙ‚Ø±ÙŠØ¨ÙŠ</div>
        <div class="meta-value">${questions.length} Ø¯Ù‚ÙŠÙ‚Ø© ØªÙ‚Ø±ÙŠØ¨Ù‹Ø§</div>
      </div>
    `;

    const btnRow = document.createElement("div");
    btnRow.className = "btn-row";

    const backBtn = document.createElement("button");
    backBtn.className = "btn";
    backBtn.textContent = "Ø±Ø¬ÙˆØ¹ Ù„ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª";
    backBtn.onclick = () => renderStudentForm();

    const startBtn = document.createElement("button");
    startBtn.className = "btn btn-primary";
    startBtn.textContent = "ÙŠÙ„Ø§ Ù†Ø¨Ø¯Ø£ âœ¨";
    startBtn.onclick = () => {
      quizStarted = true;
      currentIndex = 0;
      quizFinished = false;
      startQuestionTimer();
      renderQuestion();
    };

    btnRow.appendChild(backBtn);
    btnRow.appendChild(startBtn);

    section.appendChild(title);
    section.appendChild(instructions);
    section.appendChild(metaGrid);
    section.appendChild(btnRow);

    app.appendChild(section);
  }

  function startQuestionTimer() {
    clearInterval(timerId);
    if (quizFinished) return;

    timerId = setInterval(() => {
      if (timeLeft[currentIndex] > 0) {
        timeLeft[currentIndex]--;
        updateTimerDisplay();
      } else {
        clearInterval(timerId);
        if (currentIndex < questions.length - 1) {
          currentIndex++;
          startQuestionTimer();
          renderQuestion();
        } else {
          finishQuiz();
        }
      }
    }, 1000);
  }

  function updateTimerDisplay() {
    const timerEl = document.getElementById("question-timer");
    if (!timerEl) return;
    const seconds = timeLeft[currentIndex];
    const m = Math.floor(seconds / 60);
    const s = seconds % 60;
    timerEl.textContent = `${m}:${s.toString().padStart(2, "0")}`;

    if (seconds <= 10) {
      timerEl.parentElement.classList.add("urgent");
    } else {
      timerEl.parentElement.classList.remove("urgent");
    }
  }

  function renderQuestion() {
    if (!quizStarted) {
      renderInstructions();
      return;
    }
    if (quizFinished) {
      renderResult();
      return;
    }

    const q = questions[currentIndex];
    app.innerHTML = "";

    const section = document.createElement("div");
    section.className = "section";

    const headerRow = document.createElement("div");
    headerRow.className = "quiz-header-row";

    const leftInfo = document.createElement("div");
    leftInfo.textContent = `Ø§Ù„Ø³Ø¤Ø§Ù„ ${currentIndex + 1} Ù…Ù† ${questions.length}`;

    const timerPill = document.createElement("div");
    timerPill.className = "timer-pill";
    timerPill.innerHTML = `Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: <span id="question-timer"></span>`;

    headerRow.appendChild(leftInfo);
    headerRow.appendChild(timerPill);

    const questionCard = document.createElement("div");
    questionCard.className = "question-card";

    const subjectTag = document.createElement("div");
    subjectTag.className = "subject-tag";
    subjectTag.textContent = q.subject;

    const qNumber = document.createElement("div");
    qNumber.className = "question-number";
    qNumber.textContent = "Ø§Ø®ØªØ± Ø¥Ø¬Ø§Ø¨Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø·:";

    const qText = document.createElement("div");
    qText.className = "question-text";
    qText.textContent = q.text;

    const optionsDiv = document.createElement("div");
    optionsDiv.className = "options";

    const optionLabels = ["Ø£", "Ø¨", "Ø¬", "Ø¯", "Ù‡Ù€", "Ùˆ"];

    const isTimeUp = timeLeft[currentIndex] <= 0;

    q.choices.forEach((choice, idx) => {
      const btn = document.createElement("button");
      btn.className = "option-btn";
      if (answers[currentIndex] === idx) {
        btn.classList.add("selected");
      }
      if (isTimeUp) {
        btn.classList.add("disabled");
      }

      btn.innerHTML = `
        <span>${optionLabels[idx] || ""}</span>
        <span>${choice}</span>
      `;

      if (!isTimeUp) {
        btn.onclick = () => {
          answers[currentIndex] = idx;
          Array.from(optionsDiv.children).forEach((b, i) => {
            b.classList.toggle("selected", i === idx);
          });
        };
      }

      optionsDiv.appendChild(btn);
    });

    questionCard.appendChild(subjectTag);
    questionCard.appendChild(qNumber);
    questionCard.appendChild(qText);
    questionCard.appendChild(optionsDiv);

    const footer = document.createElement("div");
    footer.className = "quiz-footer";

    const leftInfoFooter = document.createElement("div");
    leftInfoFooter.textContent = "Ù„Ø§ ØªÙ†Ø³ÙŠÙ† ØªØ¶Ù„Ù‘Ù„ÙŠÙ† Ø¥Ø¬Ø§Ø¨ØªÙƒ ÙÙŠ ÙˆØ±Ù‚Ø© Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© ğŸ‘";

    const nav = document.createElement("div");
    nav.className = "nav-buttons";

    const prevBtn = document.createElement("button");
    prevBtn.className = "btn";
    prevBtn.textContent = "Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ù„ÙŠ Ù‚Ø¨Ù„";
    prevBtn.disabled = currentIndex === 0;
    prevBtn.onclick = () => {
      clearInterval(timerId);
      currentIndex--;
      startQuestionTimer();
      renderQuestion();
    };

    const nextBtn = document.createElement("button");
    nextBtn.className = "btn btn-primary";
    nextBtn.textContent =
      currentIndex === questions.length - 1 ? "Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù…Ø­Ø§ÙƒØ§Ø©" : "Ø§Ù„Ù„ÙŠ Ø¨Ø¹Ø¯Ù‡";
    nextBtn.onclick = () => {
      if (currentIndex === questions.length - 1) {
        finishQuiz();
      } else {
        clearInterval(timerId);
        currentIndex++;
        startQuestionTimer();
        renderQuestion();
      }
    };

    nav.appendChild(prevBtn);
    nav.appendChild(nextBtn);

    footer.appendChild(leftInfoFooter);
    footer.appendChild(nav);

    section.appendChild(headerRow);
    section.appendChild(questionCard);
    section.appendChild(footer);

    app.appendChild(section);

    updateTimerDisplay();
  }

  function finishQuiz() {
    clearInterval(timerId);
    quizFinished = true;
    renderResult();
  }

  function renderResult() {
    app.innerHTML = "";

    const section = document.createElement("div");
    section.className = "section";

    const box = document.createElement("div");
    box.className = "result-box";

    let correctCount = 0;
    questions.forEach((q, i) => {
      if (answers[i] === q.correctIndex) correctCount++;
    });

    const percent = (correctCount / questions.length) * 100;

    // Ø­ÙØ¸ Ø£ÙˆÙ„ Ù…Ø­Ø§ÙˆÙ„Ø© ÙÙŠ localStorage
    if (!savedAttempt) {
      const attempt = {
        name: studentInfo.name,
        school: studentInfo.school,
        grade: studentInfo.grade,
        score: correctCount,
        total: questions.length,
        percent: percent.toFixed(0),
        date: new Date().toLocaleString("ar-SA")
      };
      try {
        localStorage.setItem(STORAGE_KEY, JSON.stringify(attempt));
        savedAttempt = attempt;
      } catch (e) {
        // Ù†ØªØ¬Ø§Ù‡Ù„ Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„ØªØ®Ø²ÙŠÙ†
      }

      // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø¥Ù„Ù‰ Google Sheets
      if (SHEET_ENDPOINT) {
        const payload = {
          name: attempt.name,
          school: attempt.school,
          grade: attempt.grade,
          score: attempt.score,
          total: attempt.total,
          percent: attempt.percent,
          date: attempt.date,
          browser: navigator.userAgent
        };
        try {
          fetch(SHEET_ENDPOINT, {
            method: "POST",
            headers: {
              "Content-Type": "application/json"
            },
            body: JSON.stringify(payload)
          }).catch((err) => {
            console.error("Sheet error (catch):", err);
          });
        } catch (err) {
          console.error("Sheet error (try):", err);
        }
      }
    }

    const main = document.createElement("div");
    main.className = "result-main";
    main.textContent = `${correctCount} / ${questions.length} (${percent.toFixed(0)}Ùª)`;

    const note = document.createElement("div");
    note.className = "result-note";

    const nameForMsg = studentInfo.name || "ÙŠØ§ Ø·Ø§Ù„Ø¨Ø©";

    if (percent >= 80) {
      note.textContent = `${nameForMsg}ØŒ Ù…Ø§ Ø´Ø§Ø¡ Ø§Ù„Ù„Ù‡ØŒ Ø£Ø¯Ø§Ø¡ Ù‚ÙˆÙŠ Ø¬Ø¯Ù‹Ø§! Ù…Ø³ØªÙˆØ§Ùƒ ÙÙŠ Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡ Ù…Ø±Ù‡ Ù…Ù…ØªØ§Ø² ğŸ‘`;
    } else if (percent >= 60) {
      note.textContent = `${nameForMsg}ØŒ Ø¨Ø¯Ø§ÙŠØ© Ù…Ù…ØªØ§Ø²Ø©ØŒ Ø¨Ø³ ØªØ­ØªØ§Ø¬ÙŠÙ† ØªØ´Ø¯Ù‘ÙŠÙ† Ø´ÙˆÙŠ Ø¨Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ø²ÙŠØ§Ø¯Ø© ÙˆØªØ¶Ø¨Ø·ÙŠÙ†Ù‡Ø§ Ø¥Ù† Ø´Ø§Ø¡ Ø§Ù„Ù„Ù‡ ğŸ’ª`;
    } else {
      note.textContent = `${nameForMsg}ØŒ Ù„Ø§ ØªØ´ÙŠÙ„ÙŠÙ† Ù‡Ù… Ø§Ù„Ù†Ø³Ø¨Ø© Ø£Ø¨Ø¯ØŒ Ø§Ù„Ù…Ø­Ø§ÙƒØ§Ø© Ù‡Ø°ÙŠ Ø¨Ø³ Ø¹Ø´Ø§Ù† ØªØªØ¹ÙˆØ¯ÙŠÙ† Ø¹Ù„Ù‰ Ø§Ù„Ø¬Ùˆ. Ø±Ø§Ø¬Ø¹ÙŠ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù„ÙŠ ØºÙ„Ø·ØªÙ ÙÙŠÙ‡Ø§ØŒ ÙˆÙ„Ùˆ Ø§Ø­ØªØ¬ØªÙ ØªØ¯Ø±ÙŠØ¨ Ø²ÙŠØ§Ø¯Ø© Ø§Ø³ØªØ®Ø¯Ù…ÙŠ Ø¬Ù‡Ø§Ø² Ø£Ùˆ Ù…ØªØµÙØ­ Ø¢Ø®Ø± âœ¨`;
    }

    const meta = document.createElement("div");
    meta.className = "result-meta";
    meta.textContent = "Ø§Ù„Ù†ØªÙŠØ¬Ø© Ù‡Ù†Ø§ ØªØ¯Ø±ÙŠØ¨ÙŠØ© ÙÙ‚Ø·ØŒ Ù„ÙŠØ³Øª Ø¯Ø±Ø¬Ø© Ø±Ø³Ù…ÙŠØ© Ù„Ù„ØªØ­ØµÙŠÙ„ÙŠ ÙˆÙ„Ø§ ØªØ§Ø¨Ø¹Ø© Ù„Ø£ÙŠ Ø¬Ù‡Ø©.";

    const info = document.createElement("div");
    info.className = "result-meta";
    info.style.marginTop = "6px";
    info.textContent =
      `Ø§Ù„Ø§Ø³Ù…: ${studentInfo.name || "â€”"}  |  Ø§Ù„Ù…Ø¯Ø±Ø³Ø©: ${studentInfo.school || "â€”"}  |  Ø§Ù„ØµÙ/Ø§Ù„Ù…Ø³Ø§Ø±: ${studentInfo.grade || "â€”"}`;

    box.appendChild(main);
    box.appendChild(note);
    box.appendChild(meta);
    box.appendChild(info);

    section.appendChild(box);
    app.appendChild(section);
  }

  // Ø£ÙˆÙ„ Ø´Ø§Ø´Ø©: Ù„Ùˆ ÙÙŠÙ‡ Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø­ÙÙˆØ¸Ø© Ù†Ø¹Ø±Ø¶ Ø´Ø§Ø´Ø© Ø§Ù„Ù‚ÙÙ„ØŒ ØºÙŠØ± ÙƒØ°Ø§ Ù†Ø¨Ø¯Ø£ Ø¨Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨Ø©
  if (savedAttempt) {
    renderLockedScreen();
  } else {
    renderStudentForm();
  }
</script>
</body>
</html>
